(this.webpackJsonpreversi=this.webpackJsonpreversi||[]).push([[0],{17:function(e,t,r){},19:function(e,t,r){},20:function(e,t,r){},21:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r(5),i=r.n(n),s=r(11),c=r.n(s),o=(r(17),r(6)),u=r(7),l=r.n(u),h=r(9),v=r(1),f=r(2),b=r(8),y=r(4),d=r(3),p=[{x:0,y:1},{x:1,y:1},{x:1,y:0},{x:1,y:-1},{x:0,y:-1},{x:-1,y:-1},{x:-1,y:0},{x:-1,y:1}],k=function(e,t,r,a){for(var n=t.x+r.x,i=t.y+r.y;n>=0&&n<8&&i>=0&&i<8&&a.handleCell(n,i,e[n][i]);n+=r.x,i+=r.y);},j=function(){function e(t){Object(v.a)(this,e),this.myColor=t,this.otherColor=t===M?w:M,this.hasOtherPieces=!1,this.endsWithEmptySpace=!1,this.endPoint=null}return Object(f.a)(e,[{key:"handleCell",value:function(e,t,r){return this.endPoint={x:e,y:t},r===this.otherColor?(this.hasOtherPieces=!0,!0):r!==this.myColor&&(null==r?(this.endsWithEmptySpace=!0,!1):void 0)}},{key:"isValidMove",value:function(){return this.hasOtherPieces&&this.endsWithEmptySpace}},{key:"getEndPoint",value:function(){return this.endPoint}}]),e}(),m=function(){function e(t){Object(v.a)(this,e),this.myColor=t,this.otherColor=t===M?w:M,this.flip=!1,this.piecesToFlip=[]}return Object(f.a)(e,[{key:"handleCell",value:function(e,t,r){return r===this.otherColor?(this.piecesToFlip.push({x:e,y:t}),!0):r===this.myColor?(this.flip=!0,!1):null!=r&&void 0}}]),e}(),O=(r(19),"available"),x=function(e){Object(y.a)(r,e);var t=Object(d.a)(r);function r(){return Object(v.a)(this,r),t.apply(this,arguments)}return Object(f.a)(r,[{key:"render",value:function(){return Object(a.jsx)("div",{children:Object(a.jsx)(P,{game:this.props.game})})}}]),r}(i.a.Component),P=function(e){Object(y.a)(r,e);var t=Object(d.a)(r);function r(){return Object(v.a)(this,r),t.apply(this,arguments)}return Object(f.a)(r,[{key:"handleClick",value:function(e,t){var r=this.props.game;!r.isGameFinished()&&r.getCurrentPlayer()===r.blackPlayer&&this.isLegalClick(r,e,t)&&r.makeHumanMove({x:e,y:t})}},{key:"isLegalClick",value:function(e,t,r){var a,n=Object(o.a)(I(e.blackPlayer,e.state.boardState));try{for(n.s();!(a=n.n()).done;){var i=a.value;if(i.x===t&&i.y===r)return!0}}catch(s){n.e(s)}finally{n.f()}return!1}},{key:"renderCell",value:function(e,t){var r,n=this,i=this.props.game;if(i.getCurrentPlayer()!==i.blackPlayer)r=i.state.boardState[e][t];else{var s,c=!1,u=I(i.blackPlayer,i.state.boardState),l=Object(o.a)(u);try{for(l.s();!(s=l.n()).done;){var h=s.value;if(h.x===e&&h.y===t){c=!0,r=O;break}}}catch(v){l.e(v)}finally{l.f()}c||(r=i.state.boardState[e][t])}return Object(a.jsx)(g,{value:r,onClick:function(){return n.handleClick(e,t)}},"".concat(e,"_").concat(t))}},{key:"renderRow",value:function(e){for(var t=[],r=0;r<this.props.game.state.boardState[e].length;r++)t.push(this.renderCell(e,r));return Object(a.jsx)("div",{className:"board-row",children:t},e)}},{key:"render",value:function(){var e,t=this.props.game,r=t.state,n=t.getCurrentPlayer()===t.blackPlayer?"black":"white";if(r.winner)e="tie"===r.winner?"Tie":"Winner: "+r.winner;else if(0!==r.consecutivePasses){var i=t.getCurrentPlayer()===t.blackPlayer?"white":"black";e="Player ".concat(i,": PASS, next player: ").concat(n)}else e="Next player: "+n;for(var s=[],c=0;c<r.boardState.length;c++)s.push(this.renderRow(c));return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"status",children:e}),Object(a.jsx)("div",{className:"board",children:s})]})}}]),r}(i.a.Component);function g(e){var t;switch(e.value){case M:t="board-cell-white";break;case w:t="board-cell-black";break;case O:t="board-cell-available";break;default:t="board-cell"}return Object(a.jsx)("button",{className:t,onClick:e.onClick})}function C(e,t){for(var r=0,a=0;a<8;a++)for(var n=0;n<8;n++)t[a][n]===e&&r++;return r}function S(e,t,r){var a=function(e){for(var t=Array(e.length),r=0;r<e.length;r++)t[r]=e[r].slice();return t}(e);a[r.x][r.y]=t;var n,i=Object(o.a)(p);try{for(i.s();!(n=i.n()).done;){var s=n.value,c=new m(t);if(k(e,r,s,c),c.flip){var u,l=Object(o.a)(c.piecesToFlip);try{for(l.s();!(u=l.n()).done;){var h=u.value;a[h.x][h.y]=t}}catch(v){l.e(v)}finally{l.f()}}}}catch(v){i.e(v)}finally{i.f()}return a}var w=!0,M=!1,T=function(e){Object(y.a)(r,e);var t=Object(d.a)(r);function r(e){var a;return Object(v.a)(this,r),(a=t.call(this,e)).blackPlayer=e.blackPlayer,a.whitePlayer=e.whitePlayer,a.state=r.getInitialState(),a.blackPlayer.triggerMove(Object(b.a)(a)),a}return Object(f.a)(r,[{key:"getCurrentPlayer",value:function(){return this.state.turnCounter%2===0?this.blackPlayer:this.whitePlayer}},{key:"isGameFinished",value:function(){if(2===this.state.consecutivePasses)return!0;for(var e=0;e<8;e++)if(this.state.boardState[e].includes(null))return!1;return!0}},{key:"registerMove",value:function(e,t){this.setState((function(r){return{boardState:S(r.boardState,e.color,t),turnCounter:r.turnCounter+1,consecutivePasses:0}})),this.forceUpdate()}},{key:"pass",value:function(){var e=Object(h.a)(l.a.mark((function e(){var t=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){t.setState((function(e){return{turnCounter:e.turnCounter+1,consecutivePasses:e.consecutivePasses+1}})),t.forceUpdate(),setTimeout((function(){return e()}),2e3)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"makeHumanMove",value:function(){var e=Object(h.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=5;break}return e.next=3,this.pass();case 3:e.next=7;break;case 5:this.registerMove(this.blackPlayer,t),this.isGameFinished()?this.setState({consecutivePasses:0,winner:this.getWinner()}):this.whitePlayer.triggerMove(this);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"computerMove",value:function(){var e=Object(h.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=5;break}return e.next=3,this.pass();case 3:e.next=7;break;case 5:this.registerMove(this.whitePlayer,t),this.isGameFinished()&&this.setState({consecutivePasses:0,winner:this.getWinner()});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getWinner",value:function(){for(var e=0,t=0,r=0;r<8;r++)for(var a=0;a<8;a++)switch(this.state.boardState[r][a]){case M:e++;break;case w:t++}return e===t?"TIE":e>t?"WHITE":"BLACK"}},{key:"render",value:function(){return Object(a.jsx)(x,{game:this})}}],[{key:"getInitialState",value:function(){for(var e=[],t=0;t<8;t++)e[t]=Array(8).fill(null);return e[3][3]=w,e[4][4]=w,e[3][4]=M,e[4][3]=M,{boardState:e,turnCounter:0,consecutivePasses:0}}}]),r}(i.a.Component);function I(e,t){for(var r=[],a=0;a<8;a++)for(var n=0;n<8;n++)if(t[a][n]===e.color){var i,s=Object(o.a)(p);try{for(s.s();!(i=s.n()).done;){var c=i.value,u=new j(e.color);k(t,{x:a,y:n},c,u),u.isValidMove()&&r.push(u.getEndPoint())}}catch(l){s.e(l)}finally{s.f()}}return r}r(20);var F=function e(t){Object(v.a)(this,e),this.color=t},N=function(e){Object(y.a)(r,e);var t=Object(d.a)(r);function r(){return Object(v.a)(this,r),t.apply(this,arguments)}return Object(f.a)(r,[{key:"makeMove",value:function(e){this.resolvePromise(e)}},{key:"triggerMove",value:function(e){0===I(this,e.state.boardState).length&&e.makeHumanMove(null)}}]),r}(F),E=function(e){Object(y.a)(r,e);var t=Object(d.a)(r);function r(){return Object(v.a)(this,r),t.apply(this,arguments)}return r}(F),W=function(e){Object(y.a)(r,e);var t=Object(d.a)(r);function r(e,a,n){var i;return Object(v.a)(this,r),(i=t.call(this,a)).heuristic=e,i.maxDepth=n,i}return Object(f.a)(r,[{key:"triggerMove",value:function(e){var t=this;setTimeout((function(){var r=t.minmax(0,{boardState:e.state.boardState,value:null,move:null},t.color,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY);e.computerMove(r.move)}),2e3)}},{key:"minmax",value:function(e,t,r,a,n){if(e===this.maxDepth||this.isTerminalState(t))return t.value=this.heuristic(this.color,t.boardState,t.move),t;var i,s=r===M?-1:1/0,c=null,u=null,l=Object(o.a)(I({color:r},t.boardState));try{for(l.s();!(i=l.n()).done;){var h=i.value,v=S(t.boardState,r,h),f=this.minmax(e+1,{boardState:v,value:null,move:h},!r);if(r===M&&s<f.value){if(s=f.value,c=f,u=h,n<=(a=Math.max(a,s)))break}else if(r===w&&s>f.value&&(s=f.value,c=f,u=h,(n=Math.min(n,s))<=a))break}}catch(b){l.e(b)}finally{l.f()}return null===c&&(c=t,s=this.heuristic(this.color,t.boardState,t.move)),c.value=s,c.move=u,c}},{key:"isTerminalState",value:function(e){for(var t=!1,r=0;r<8;r++){for(var a=0;a<8;a++)if(null==e.boardState[r][a]){t=!0;break}if(t)break}return!t}}]),r}(E),A=[[4,1,2,1,1,2,1,4],[1,1,2,1,1,2,1,1],[2,2,2,1,1,2,2,2],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[2,2,2,1,1,2,2,2],[1,1,2,1,1,2,1,1],[4,1,2,1,1,2,1,4]],G=function(e){Object(y.a)(r,e);var t=Object(d.a)(r);function r(e){return Object(v.a)(this,r),t.call(this,(function(e,t,r){return null===r?C(e,t):C(e,t)*A[r.x][r.y]}),e,4)}return r}(W);function L(){var e=new N(w),t=new G(M);return Object(a.jsx)("div",{className:"App",children:Object(a.jsx)(T,{blackPlayer:e,whitePlayer:t})})}var H=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,22)).then((function(t){var r=t.getCLS,a=t.getFID,n=t.getFCP,i=t.getLCP,s=t.getTTFB;r(e),a(e),n(e),i(e),s(e)}))};c.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(L,{})}),document.getElementById("root")),H()}},[[21,1,2]]]);
//# sourceMappingURL=main.db50c1a3.chunk.js.map